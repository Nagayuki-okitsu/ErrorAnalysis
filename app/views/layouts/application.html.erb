<!DOCTYPE html>

<html>
  <head>

    <title>ErrorAnalysis</title>

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Corben:700" rel="stylesheet">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>

    <%# いいね機能に対するajax用 %>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script> 

      $(function(){
        setTimeout("$('.flash').fadeOut('slow')", 5000);
      });

      $(function(){
        setTimeout("$('.flash_2').fadeOut('slow')", 10000);
      });

      $(function(){
        setTimeout("$('.flash_signup').fadeOut('slow')", 15000);
      });

      jQuery(function() {
        var appear = false;
        var pagetop = $('#page_top');
        $(window).scroll(function () {
          if ($(this).scrollTop() > 100) {  //100pxスクロールしたら
            if (appear == false) {
              appear = true;
              pagetop.stop().animate({
                'right': '0px' //右から0pxの位置に
              }, 300); //0.3秒かけて現れる
            }
          } else {
            if (appear) {
              appear = false;
              pagetop.stop().animate({
                'right': '-50px' //右から-50pxの位置に
              }, 300); //0.3秒かけて隠れる
            }
          }
        });
        pagetop.click(function () {
          $('body, html').animate({ scrollTop: 0 }, 500); //0.5秒かけてトップへ戻る
          return false;
        });
      });

    </script>

  </head>

  <body>

    <%# 背景 %>
    <div class="area" >
      <ul class="circles">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
      </ul>
    </div >

    <nav>

      <div class="list">
        <ul class="gnav">
          <li><a href=""><i class="fas fa-list-ul"></i></a>
            <ul>
              <li><%= link_to "/" do %><i class="fas fa-home"></i> HOME<% end %></li>
              <li><%= link_to questions_path do %><i class="fas fa-box-open"></i> 質問箱<% end %></li>
              <% if logged_in? %>
                <li><%= link_to  logout_path, method: :delete, data: {confirm: "ログアウトしますか？"} do%><i class="fas fa-user"></i> ログアウト<% end %></li>
              <% else %>
                <li><%= link_to  login_path do%><i class="fas fa-user"></i> ログイン<% end %></li>
              <% end %>
              <li><%= link_to new_user_path do %><i class="fas fa-user-plus"></i> 新規登録<% end %></li>
            </ul>
          </li>
        </ul>
      </div>

      <%= button_to questions_path, :class => 'q_nav_btn', :method => :get do %>
        <i class="fas fa-box-open"></i> 質問箱
      <% end %>

      <h1>-ErrorAnalysis-</h1>
      
      <% if logged_in? %>
        <% if @now_user_show.nil? %>
          <div class="log">
            <%= link_to  user_path(@current_user) do %>
              <button class="log_btn_2"><i class="fas fa-user-check"></i> マイページ</button>
            <% end %>
          </div>
        <% else %>
          <div class="log">
            <%= link_to  logout_path, method: :delete, data: {confirm: "ログアウトしますか？"} do %>
              <button class="log_btn_2"><i class="fas fa-user-check"></i> ログアウト</button>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <div class="log">
          <%= link_to  login_path do%>
            <button class="log_btn"><i class="fas fa-user"></i> ログイン</button>
          <% end %>
        </div>
      <% end %>

      <div class="signup_link">
        <%= link_to new_user_path do %>
          <button class="signup_btn"><i class="fas fa-user-plus"></i> 新規登録</button>
        <% end %>
      </div>

    </nav>

    
    <%= yield %>

    <div id="page_top"><a href="#"></a></div>
  </body>
</html>
