<div class="content_box" align="center">
  <div class="around_box">

    <%= form_with url:analysis_homes_path, method: :get do |f| %>
      <div class="searchArea">
        <%= text_field_tag "err_mess","", {class: "searchText"} %>
        <div class="searchButton" onclick="goSearch()">
          <%= image_submit_tag 'search.png', {class:"searchImg"} %>
        </div>
      </div>
    <% end %>

    <% if @errorList.empty? %>
    
      <% if flash[:log_mes] %>
        <div class="flash"><%= flash[:log_mes] %></div>
      <% end %>

      <div class="wrap">
        <div class="content">
          <p class="fadein txt01">これはエラーを解析するアプリケーションです</p>
          <p class="fadein txt02">１ , エラーメッセージをコピー</i><br><%= image_tag 'example_copy.png', class: 'copy_ex'%></p>
          <p class="fadein txt03"><i class="fas fa-angle-double-down"></i><br>２ , 検索ボックスに貼り付け<br><%= image_tag 'example_input.png', class:'input_ex'%></p>
          <div class="fadein al_1"><p class="fadein txt04">※解析の精度を高めるため一度の実行で出力された全てのエラーメッセージを貼り付けてください。(14029字まで対応）</p></div>
          <p class="fadein txt05"><i class="fas fa-angle-double-down"></i><br>３ , Enter または 検索ボタンクリックで解析開始<br><%= image_tag 'example_result.png', class: 'result_ex'%></p>
          <p class="fadein txt06"><i class="fas fa-angle-double-down"></i><br>４ , 解決できなかったら質問箱で質問<br><%= image_tag 'example_question.png', class: 'question_ex'%><br></p>
          <div class="fadein al_2"><p class="fadein txt07">※質問箱ではエラーの解決方法だけでなくプログラムの組み方などプログラミングに関する様々な質問を投稿できます。</p></div>
        </div>
      </div> 

    <% else %>
      
        <% resultFlag = 0 %>

        <% @errorList.each do |errorList| %>

          <% err_mess = errorList.err_mess %>

          <% if params[:err_mess].include?("#{err_mess}")%>

            <div class="resultbox">

              <h4><i class="fas fa-check-circle"></i>　解析キーワード</h4>
                <p>"<%= errorList.err_mess %>"</p>
              
              <h4><i class="fas fa-check-circle"></i>　主な原因</h4>
                <p><%= errorList.cause %></p>

              <h4><i class="fas fa-check-circle"></i>　ヒント</h4>
                <p><%= errorList.advice %></p>
                      
            </div>

            <% resultFlag = 1%>

          <% elsif err_mess == @errorList[@errorList.length-1].err_mess && resultFlag == 0%>

            <div class="resultbox">

              <div class="mess">
                <h4 style="color:red;"><i class="fas fa-exclamation-circle"></i> No error was found</h4>
                <p>エラーキーワードを見つけることができませんでした。<br>このアプリケーションに登録されていないエラーの可能性があります。
                  <br><br>
                  <%= button_to new_question_path, :class => 'q_btn', :method => :get do %>
                    <i class="fas fa-pen q_icon"></i>質問する
                  <% end %>
                </p>
              </div>
              
            </div>

          <% end %>

        <% end %>
        
    <% end %>

  </div>

</div>
