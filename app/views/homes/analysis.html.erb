<div class="back"></div>

<a class="top_link" href="/"></a>

<nav>

  <h1>-ErrorAnalysis-</h1>
  
  <%= form_with url:analysis_homes_path, method: :get, lonal: true do |f| %>
  <div class="searchArea">
    <%= text_field_tag "err_mess","", {class: "searchText"} %>
    <div class="searchButton" onclick="goSearch()">
      <%= image_submit_tag 'search.png', {class:"searchImg"} %>
    </div>
  </div>
  <% end %>

</nav>
  


<% if @errorList.empty? %>
  <div class="resultbox">

    <div class="alertbox">
    <div class="alert-title"><i class="fas fa-exclamation-triangle alert"></i> 注意</div>
      <p>※解析の精度を高めるため一度の実行で出力されたエラーメッセージを全てコピーして貼り付けてください。(14029字まで対応)</p>
    </div>

    <div class="example">
      <p>1 , エラーメッセージをコピー。</p>
      <%= image_tag 'example_copy.png',{class:"ex_copy"}%><br>
      <i class="fas fa-angle-double-down down"></i>

      <p>2 , コピーしたメッセージを検索ボックスに貼り付け。</p>
      <%= image_tag 'example_input.png',{class:"ex_input"}%><br>
      <i class="fas fa-angle-double-down down"></i>

      <p>3 , Enterキー or 検索ボタンクリックで解析開始。</p>
      <%= image_tag 'example_result.png',{class:"ex_result"}%>
    </div>
  </div>
<% else %>
  <% resultFlag = 0 %>
  <% @errorList.each do |errorList| %>
    <% err_mess = errorList.err_mess %>

    <% if params[:err_mess].include?("#{err_mess}")%>
      <div class="resultbox">

        <h4><i class="fas fa-check-circle"></i>　解析キーワード</h4>
          <p>"<%= errorList.err_mess %>"</p>
        
        <h4><i class="fas fa-check-circle"></i>　主な原因</h4>
          <p><%= errorList.cause %></p>

        <h4><i class="fas fa-check-circle"></i>　ヒント</h4>
          <p><%= errorList.advice %></p>
                 
      </div>
      <% resultFlag = 1%>
    <% elsif err_mess == @errorList[@errorList.length-1].err_mess && resultFlag == 0%>
      <div class="resultbox">
        <div class="mess">
          <h4 style="color:red;"><i class="fas fa-exclamation-circle"></i>　No error was found</h4>
            <p>エラーキーワードを見つけることができませんでした。このアプリケーションに登録されていないエラーの可能性があります。</p>
        </div>
      </div>
    <% end %>

  <% end %>
<% end %>
　