<div class="ans_box">

  <% if @answer.present? %>
    <% answer = @answer %>
  <% else %>
    <% answer = Answer.find(@reply.answer_id) %>
  <% end %>

  <div class="box-title">返信対象の回答（ページ下部に返信フォームがあります）</div>
  <h5><i class="fas fa-user-circle user_icon"></i> <%= User.find_by(id: answer.user_id).name %></h5>
  <div class="ans_con">
    <p><%= answer.answer %></p>
  </div>

  <% rep = Reply.where(answer_id: answer.id) %>
  
  <% if rep.present? %>
    <% rep.each do |rep| %>
      <div class="rep">
        <h5><i class="fas fa-user-circle user_icon"></i> <%= User.find_by(id: rep.user_id).name %></h5>
        <p><%= rep.reply %></p>
      </div>
    <% end %>
  <% end %>
</div>

<%= form_with(model: reply) do |form| %>

  <% if reply.errors.any? %>
    <div class="error_ms", style="font-size: 17px;">
      <h5>・返信内容を入力してください</h5>
    </div>
  <% end %>

  <% if reply.answer_id.nil? %>
    <%= form.hidden_field :answer_id, :value => @answer.id %>
  <% else %>
    <%= form.hidden_field :answer_id, :value => reply.answer_id %>
  <% end %>


  <div class="field">
    <%= form.label :返信内容, class: "ans_label" %>
    <%= form.text_area :reply, class: "ans_form" %>
  </div>

  <%= button_tag type: :submit, :class => 'ans_button' do %><i class="fas fa-paper-plane"></i>送信<% end %>


<% end %>